ssh:
  image: pro100coder/enviroment:ssh
  dns: 172.17.0.1
  domainname: enviroment
  ports:
    - 0.0.0.0:10022:22
  volumes:
    - /etc/localtime:/etc/localtime:ro
    - ./configs/ssh/php/xdebug.ini:/etc/php/7.0/cli/conf.d/20-xdebug.ini:ro
    - ./configs/ssh/php/php.ini:/etc/php/7.0/cli/php.ini:ro
    - ./configs/ssh/.profile:/srv/www/.profile:ro
  volumes_from:
    - enviroment_sitesdata_1
  links:
    - mariadb:mariadb
    - memcached:memcached
    - dnsdock:dnsdock

php56:
  image: pro100coder/enviroment:php-5.6
  dns: 172.17.0.1
  volumes:
    - /etc/localtime:/etc/localtime:ro
    - ./configs/php/fpm-5.6/php.ini:/usr/local/etc/php/php.ini
    - ./ioncube_loader_lin_5.6.so:/tmp/ioncube_loader_lin_5.6.so:ro
  volumes_from:
    - enviroment_sitesdata_1
  links:
    - mariadb:mariadb
    - memcached:memcached
    - dnsdock:dnsdock

php55:
  image: pro100coder/enviroment:php-5.5
  dns: 172.17.0.1
  volumes:
    - /etc/localtime:/etc/localtime:ro
  volumes_from:
    - enviroment_sitesdata_1
  links:
    - mariadb:mariadb
    - memcached:memcached
    - dnsdock:dnsdock

php52:
  image: pro100coder/enviroment:php-5.2
  dns: 172.17.0.1
  volumes:
    - /etc/localtime:/etc/localtime:ro
  volumes_from:
    - enviroment_sitesdata_1
  links:
    - mariadb:mariadb
    - memcached:memcached
    - dnsdock:dnsdock

php70:
  image: pro100coder/enviroment:php-7.0
  dns: 172.17.0.1
  volumes:
    - /etc/localtime:/etc/localtime:ro
    - ./configs/php/fpm-7.0/php.ini:/usr/local/etc/php/php.ini
  volumes_from:
    - enviroment_sitesdata_1
  links:
    - mariadb:mariadb
    - memcached:memcached
    - dnsdock:dnsdock

nginx:
  image: nginx:1.9
  dns: 172.17.0.1
  volumes:
    - /etc/localtime:/etc/localtime:ro
    - ./configs/nginx/conf:/etc/nginx:ro
  ports:
    - 80:80
  links:
    - php70:php70
    - php56:php56
    - php55:php55
    - php52:php52
    - dnsdock:dnsdock
  volumes_from:
    - enviroment_sitesdata_1

mariadb:
  image: mariadb:10
  volumes:
    - /etc/localtime:/etc/localtime:ro
    - ./configs/mariadb/conf.d:/etc/mysql/conf.d:ro
  environment:
    - MYSQL_ROOT_PASSWORD=root
  ports:
    - 3306:3306
  volumes_from:
    - enviroment_mariadbdata_1

memcached:
  image: memcached:1.4
  volumes:
    - /etc/localtime:/etc/localtime:ro

dnsdock:
  image: tonistiigi/dnsdock
  volumes:
    - /var/run/docker.sock:/run/docker.sock
    - /etc/localtime:/etc/localtime:ro
  ports:
    - 172.17.0.1:53:53/udp
